<%- include('./components/header')%>

    <body style="background-color: #cae8fb;">       
        <%- include('./components/navigation')%>
        <link rel="stylesheet" href="/movie.css">


        <div class="container-fluid" style="margin-top: 50px;">
            <div class="row">
                <div class="col-lg-3" style="margin-left: 30px;">
                    <img class="poster" src="<%= movie.movieImage %>" alt="movie poster" >
                    <div class="movie-details" >
                        <p><strong>Genre:</strong> <%= movie.genre %></p>
                        <p><strong>Length:</strong> <%= movie.movieLength %> minutes</p>
                        <p><strong>Author:</strong> <%= movie.movieAuthor %></p>
                        <p>
                                <% if (movie.ageRestriction === 0) { %>
                                    No age restriction
                                <% } else { %>
                                    <strong>Age Restriction: </strong><%= movie.ageRestriction %>+
                                <% } %>
                        </p>
                    </div>
                </div>
                <div class="col-lg-8">
                    <div class="movie-details">
                        <h1><%= movie.movieName %></h1>
                        <div class="movie-description">
                            <h5>Movie Description</h2>
                            <%=movie.movieDescription%>
                        </div>
                    </div>
                    <% let chairArray=movie.chairArray %>
                    <% console.log(chairArray) %>
                    <% console.log(chairArray[3]) %>
                    
                    <div class="tickets-purchase">
                        <div class="seats-container" >
                            <div class = "screen">
                                <img src="/pics/screenCinema.png" alt="screen" style= "width: 600px;">
                            </div>
                            <div class="seats" style="display: flex; flex-wrap: wrap;justify-content: center; align-items: center; width: 80%; margin-top: 50px; margin-left: 55px;">
                                <% for(let i = 0; i < movie.chairAmount ; i++) {
                                    if(movie.chairArray[i] == false){%>
                                        <button onclick="SelectSeat(this.id)" id="<%=i%>" style="background: none; border: none; padding: 0;"><img src="/pics/SeatAvailable-removebg-preview.png" alt="greenChair(Available)" style="height: 40px; width: 40px;"></button>
                                    <% }else{ %>
                                    <img id="<%=i%>" src="/pics/SeatUnavailable-removebg-preview.png" alt="grayChair(not Available)" style="height: 40px; width: 40px;">
                                <% }} %>
                            </div>
                        </div>
                        <h4 style="margin-left: 220px;">price:15$(per ticket)</h6>
                        <div class="purchase-btn">
                            <span style="font-size: larger; margin-left:25%;">Purchase</span><br>
                            <span style="font-size: 0.7em; margin-left:25%;"><%#selectedChairAmount%> Chairs selected</span>
                        </div>
                    </div>
                </div>
            
            </div>
        </div>



        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
        <script>
            function SelectSeat(id) 
            {
                let seat = document.getElementById(id);
                console.log(seat.src)
                if (seat.getAttribute('src') === '/pics/SeatAvailable-removebg-preview.png')
                    seat.src = '/pics/SeatSelected-removebg-preview.png';
                else 
                    seat.src = '/pics/SeatAvailable-removebg-preview.png';

            }

            function Purchase()
            {

            }
        </script>
    </body>
</html>