<%- include('./components/header')%>
<body >
    <%- include('./components/navigation')%>


    <div class="container" style="margin-top: 30px;">
        <div class="row">

            <div class="col-lg-3">
                <h3>Add Movie</h3>
                <form id="add_movie_form" method="post" action="/functions/add_movie">
                    <label class="form-label">Movie Name</label>
                    <input type="text" name="movieName" class="form-control">
                    <label class="form-label">Movie Image</label>
                    <input type="text" name="movieImage" class="form-control">
                    <label class="form-label">Movie Length</label>
                    <input type="text" name="movieLegth" class="form-control">
                    <label class="form-label">Movie Author</label>
                    <input type="text" name="MovieAuthor" class="form-control">
                    <label class="form-label">Age Restriction</label>
                    <div style="margin-top: 10px; margin-bottom:10px;" class="btn-group" role="group" aria-label="Basic radio toggle button group">
                        <input type="radio" class="btn-check" name="ageR" value="true" id="btnradio1" autocomplete="off">
                        <label class="btn btn-outline-primary" for="btnradio1">True</label>
                      
                        <input type="radio" class="btn-check" name="ageR" value="false" id="btnradio2" autocomplete="off" checked>
                        <label class="btn btn-outline-primary" for="btnradio2">False</label>
                    </div><br>
                    <input type="text" name="ageRestriction" value="0" class="form-control" id="ageResInput" hidden="">
                    <label class="form-label">Genre</label>
                    <input type="text" name="genre" class="form-control">
                        <button form="add_movie_form" type="submit" class="btn btn-primary" style="width:100%; margin-top:12px;">Add Movie</button>
                    
                </form>

            </div>
            <div class="col-lg-9">
                <%if(movies.length>0){%>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Movie Name</th>
                                <th>Movie Image</th>
                                <th>Movie Length</th>
                                <th>Movie Author</th>
                                <th>Age Restriction</th>
                                <th>Genre</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <%for(let movie of movies){%>
                                <tr>
                                    <td class="align-middle"><h5><%=movie.id%></h5></td>
                                    <td class="align-middle"><h5><%=movie.movieName%></h5></td>
                                    <td ><img src="<%=movie.movieImage%>" style="width:50px; height:auto;"/></td>
                                    <td class="align-middle"><h5><%=movie.movieLength%></h5></td>
                                    <td class="align-middle"><h5><%=movie.movieAuthor%></h5></td>
                                    <td class="align-middle"><h5><%=movie.ageRestriction%></h5></td>
                                    <td class="align-middle"><h5><%=movie.genre%></h5></td>
                                    <td class="align-middle"><a class="btn btn-info" style="margin-bottom:10px;" >Products</a>
                                    <form method="post" action="/functions/delete_category/<%=movie.id%>"><button type="submit" class="btn btn-danger">Delete</button></form></td>
                                </tr>
                            <%}%>
                        </tbody>

                    </table>
                <% } else {%>
                    <p>no data for you</p>
                <%}%>
                 

            </div>
        </div>
    </div>

    <script>
        // Get the radio buttons and age restriction input element
        const trueRadio = document.getElementById('btnradio1');
        const falseRadio = document.getElementById('btnradio2');
        const ageRestrictionInput = document.getElementById('ageResInput');
    
        // Add event listeners to the radio buttons
        trueRadio.addEventListener('change', function() {
            ageRestrictionInput.hidden=false;
            ageRestrictionInput.value = "";
        });
    
        falseRadio.addEventListener('change', function() {
            ageRestrictionInput.hidden=true;
            ageRestrictionInput.value = "0"; // Clear the input value
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
</body>
</html>